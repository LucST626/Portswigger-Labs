Lab: SQL injection UNION attack, finding a column containing text

üéØ Objetivo

Identificar qu√© columna de las devueltas por la consulta original tiene un tipo de datos compatible con texto (string), para poder usarla para mostrar datos exfiltrados.

- Estrategia: Prueba de Error y Acierto

Una vez que sabemos el n√∫mero de columnas (en este lab son 3), debemos probar una por una reemplazando el valor NULL por una cadena de texto aleatoria.

Si la columna no acepta texto, la base de datos lanzar√° un error.

- Pasos de la resoluci√≥n

Para resolver el lab, debemos encontrar la columna que acepte el valor proporcionado por el laboratorio.

Paso A: Probar la primera columna 

 ' UNION SELECT 'abcdef', NULL, NULL-- 

image:img/SQL-8.1.png[]

Resultado: Error de base de datos o p√°gina vac√≠a.

Paso B: Probar la segunda columna 

 ' UNION SELECT NULL, 'abcdef', NULL-- 

image:img/SQL-8.2.png[]

Resultado Perfecto! El texto aparece.

Conclusi√≥n: Solo la columna 2 es apta para extraer datos de tipo texto.

- Explicaci√≥n T√©cnica (Tipos de Datos)

Las bases de datos son estrictas. 

Si la consulta original espera un N√∫mero en la columna 1 y t√∫ le env√≠as un String mediante un UNION, la consulta fallar√° por "Data type mismatch" (Incompatibilidad de tipos).

El valor NULL se usa en las pruebas porque puede convertirse autom√°ticamente a cualquier tipo.