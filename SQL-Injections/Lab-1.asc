Lab: SQL injection vulnerability in WHERE clause allowing retrieval of hidden data

- Escenario
   
Cuando seleccionas una categoría (por ejemplo, "Gifts"), la aplicación web realiza una consulta a la base de datos que se ve más o menos así:

 SELECT * FROM products WHERE category = 'Gifts' AND released = 1

released = 1: Significa que solo se muestran productos publicados.

released = 0: Son productos ocultos (los que queremos ver).

- El ataque (La Inyección)

Tu objetivo es "engañar" a la base de datos para que ignore la condición released = 1. Para ello, introduces un código malicioso en la URL.

El payload clásico es: ' OR 1=1--

- ¿Qué sucede en el servidor?

Al concatenar tu entrada, la consulta se transforma en esto:

 SELECT * FROM products WHERE category = 'Gifts' OR 1=1--' AND released = 1

Aquí ocurre la magia por dos razones:

OR 1=1: Como 1=1 siempre es verdadero (True), la base de datos decide mostrar todos los registros, sin importar si pertenecen a esa categoría o no.

--: Estos dos guiones son el símbolo de comentario en SQL. Todo lo que viene después (incluyendo el AND released = 1) es ignorado por la base de datos.

- El resultado

La base de datos ejecuta simplemente: 

 SELECT * FROM products WHERE category = 'Gifts' OR True.

Al ser una condición siempre cierta, el filtro de "productos publicados" desaparece y la página te muestra absolutamente todo lo que hay en la tabla, incluyendo los productos ocultos.